docker build -t mctrack:v0.1 .

pip install tensorflow
pip install open3d

docker run -it --shm-size=16g \
    -p 8081:8081 \
    -v "/media/aimlab/HDD00/users/seongjun/3dmot_ws/MCTrack:/3dmot_ws/MCTrack" \
    -v "/media/aimlab/HDD00/dataset/seongjun_data/MCTrack/data:/3dmot_ws/MCTrack/data" \
    -v "/media/aimlab/HDD00/users/seonghyeon/pr_system/OpenPCDet/data/nuscenes/v1.0-trainval:/3dmot_ws/MCTrack/data/nuscenes/datasets" \
    -e DISPLAY=$DISPLAY -v /tmp/.X11-unix:/tmp/.X11-unix \
    --name mctrack0 \
    mctrack:v0.1 /bin/bash

docker run -it --shm-size=16g \
    -p 8081:8081 \
    -v "/home/aimlab/seongjun_ws/docker_ws/prsys_ws/MCTrack:/3dmot_ws/MCTrack" \
    -v "/media/aimlab/HDD02_1TB/mctrack/data:/3dmot_ws/MCTrack/data" \
    -v "/media/aimlab/One Touch/nuscenes_asia:/3dmot_ws/MCTrack/data/nuscenes/datasets" \
    -v "/media/aimlab/HDD02_1TB/prsys/prsys_results:/3dmot_ws/MCTrack/prsys_results" \
    -e DISPLAY=$DISPLAY -v /tmp/.X11-unix:/tmp/.X11-unix \
    --name mctrack0 \
    mctrack:v0.1 /bin/bash

python preprocess/convert2baseversion.py --dataset nuscenes

python main.py --dataset nuscenes -p 1
python main.py --dataset nuscenes -p 1 --debug
python main.py --dataset nuscenes -p 20 -e

python seongjun_tools/visualize_track.py \
  --results_json results/nuscenes/20251031_072937/results_for_motion.json \
  --nusc_root data/nuscenes/datasets \
  --scene_name scene-0003 \
  --version v1.0-trainval


python seongjun_tools/evaluate_trackwise.py \
    results/nuscenes/20251031_081143/results_for_motion.json \
    --nusc_dataroot data/nuscenes/datasets \
    --eval_set val \
    --nusc_version v1.0-trainval \
    --output_path results/nuscenes/20251031_081143/trackwise_evaluation.json \
    --verbose 1

python seongjun_tools/evaluate_trackwise.py \
    prsys_results/interface_test/20251104_194500/step_1/tracking_results_for_motion.json \
    --nusc_dataroot data/nuscenes/datasets \
    --eval_set val \
    --nusc_version v1.0-trainval \
    --output_path prsys_results/interface_test/20251104_194500/step_1/trackwise_evaluation.json \
    --verbose 1

python /3dmot_ws/MCTrack/preprocess/convert2baseversion.py \
  --dets_path data/nuscenes/detectors/centerpoint/val.json \
  --save_path data/base_version/nuscenes/{YYYYMMDD_hhmmss}/step_{N} \
  --split val

python /3dmot_ws/MCTrack/main.py -p 20 \
  --dets_path data/base_version/nuscenes/{YYYYMMDD_hhmmss}/step_{N} \
  --save_path prsys_results/{YYYYMMDD_hhmmss}/step_{N} \
  --split {val/test/train} 

datetime.now().strftime("%Y%m%d_%H%M%S")

bash /3dmot_ws/MCTrack/perform_tracking.sh \
  --run_name test_1 \
  --timestamp 20251104_170700 \
  --step 1 \
  --processors 20 \
  --split val \
  --dets_file_path /3dmot_ws/MCTrack/data/nuscenes/detectors/centerpoint/val.json

bash /3dmot_ws/MCTrack/perform_tracking.sh \
  --run_name test_1 \
  --timestamp 20251104_194500 \
  --step 1 \
  --processors 20 \
  --split val \
  --dets_file_path /3dmot_ws/MCTrack/data/nuscenes/detectors/test/detection_results.json

python /3dmot_ws/MCTrack/main.py -p 20 \
  --dets_folder_path /3dmot_ws/MCTrack/data/base_version/nuscenes/interface_test/20251104_194500/step_1 \
  --save_folder_path /3dmot_ws/MCTrack/prsys_results/interface_test/20251104_194500/step_1 \
  --split val

python seongjun_tools/evaluate_trackwise.py \
    prsys_results/interface_test/20251104_194500/step_1/tracking_results_for_motion.json \
    --nusc_dataroot data/nuscenes/datasets \
    --eval_set val \
    --nusc_version v1.0-trainval \
    --output_path prsys_results/interface_test/20251104_194500/step_1/trackwise_evaluation.json \
    --verbose 1

python seongjun_tools/evaluate_trackwise_parallel.py \
    --result_path prsys_results/interface_test/20251104_194500/step_1/tracking_results_for_motion.json \
    --output_path prsys_results/eval_code_test/trackwise_evaluation.json \

python seongjun_tools/evaluate_trackwise_parallel.py \
    --result_path prsys_results/interface_test/20251104_194500/step_1/tracking_results_for_motion.json \
    --output_path prsys_results/eval_code_test_2/trackwise_evaluation.json \
    --max_scenes 5

python seongjun_tools/evaluate_trackwise_parallel.py \
    --result_path prsys_results/interface_test/20251104_194500/step_1/tracking_results_for_motion.json \
    --output_path prsys_results/eval_code_test_3/trackwise_evaluation.json

pip install seaborn matplotlib pandas

python /3dmot_ws/MCTrack/seongjun_tools/visualize_evalute_results.py \
  /3dmot_ws/MCTrack/prsys_results/interface_test/20251104_194500/step_1/trackwise_evaluation.json \
  --variant kalman_cv

python seongjun_tools/check_tracking_result.py \
  prsys_results/interface_test/20251104_194500/step_1/tracking_results_for_motion.json

python /3dmot_ws/MCTrack/seongjun_tools/visualize_evalute_results.py \
  /3dmot_ws/MCTrack/prsys_results/eval_code_test_3/trackwise_evaluation.json \
  --variant kalman_cv

bash /3dmot_ws/MCTrack/run_tracking.sh \
  --run_name bevfusion_init \
  --timestamp 20251107_163200 \
  --step 0 \
  --processors 20 \
  --split val \
  --dets_file_path "/3dmot_ws/MCTrack/data/nuscenes/detectors/detection_results(bevfusion).json"


bash /3dmot_ws/MCTrack/run_tracking.sh \
  --run_name bevfusion_mini_train \
  --timestamp 20251110_141300 \
  --step 0 \
  --processors 20 \
  --split mini_train \
  --dets_file_path "/3dmot_ws/MCTrack/data/nuscenes/detectors/detection_results(bevfusion)(mini_train).json"


docker run -it --shm-size=16g \
    -p 8082:8082 \
    -v "/media/aimlab/HDD1/users/seongjun/prsystem/MCTrack:/3dmot_ws/MCTrack" \
    -v "/data/user_data/seongjun/mctrack/data:/3dmot_ws/MCTrack/data" \
    -v "/data/dataset/yuri_nuscenes:/3dmot_ws/MCTrack/data/nuscenes/datasets" \
    -v "/data/user_data/seongjun/prsystem/prsys_results:/3dmot_ws/MCTrack/prsys_results" \
    --name mctrack1 \
    mctrack:v0.1 /bin/bash


python seongjun_tools/visualize_boxes_det_trk.py \
  --detection_json /3dmot_ws/MCTrack/prsys_results/val_1/20251117_145748/step_5/detection_results.json \
  --tracking_json /3dmot_ws/MCTrack/prsys_results/val_1/20251117_145748/step_5/tracking_results_for_motion.json \
  --output_dir /3dmot_ws/MCTrack/prsys_results/val_1/20251117_145748/step_5/visualize_images_rot_det \
  --scene_name scene-0003

python seongjun_tools/visualize_boxes_det_trk.py \
  --detection_json /3dmot_ws/MCTrack/prsys_results/val_1/20251117_145748/step_0/detection_results.json \
  --tracking_json /3dmot_ws/MCTrack/prsys_results/val_1/20251117_145748/step_0/tracking_results_for_motion.json \
  --output_dir /3dmot_ws/MCTrack/prsys_results/val_1/20251117_145748/step_0/visualize_images_rot_det \
  --scene_name scene-0003

python seongjun_tools/visualize_boxes_det_trk.py \
  --detection_json /3dmot_ws/MCTrack/prsys_results/val_1/20251117_145748/step_4/detection_results.json \
  --tracking_json /3dmot_ws/MCTrack/prsys_results/val_1/20251117_145748/step_4/tracking_results_for_motion.json \
  --output_dir /3dmot_ws/MCTrack/prsys_results/val_1/20251117_145748/step_4/visualize_images \
  --scene_name scene-0003

python seongjun_tools/visualize_boxes_det_trk.py \
  --detection_json /3dmot_ws/MCTrack/prsys_results/val_1/20251117_145748/step_0/detection_results.json \
  --tracking_json /3dmot_ws/MCTrack/prsys_results/val_1/20251117_145748/step_0/tracking_results_for_motion.json \
  --output_dir /3dmot_ws/MCTrack/prsys_results/val_1/20251117_145748/step_0/visualize_images_rot_det \
  --scene_name scene-0003

python seongjun_tools/visualize_boxes_det_det.py \
  --detection_json1 /3dmot_ws/MCTrack/prsys_results/val_1/20251117_145748/step_0/detection_results.json \
  --detection_json2 /3dmot_ws/MCTrack/prsys_results/val_1/20251117_145748/step_5/detection_results.json \
  --output_dir /3dmot_ws/MCTrack/prsys_results/val_1/20251117_145748/visualize_images_det1_det2 \
  --scene_name scene-0003


python seongjun_tools/visualize_boxes_det_trk.py \
  --detection_json /3dmot_ws/MCTrack/prsys_results/val_1/20251117_145748/step_0/detection_results.json \
  --tracking_json /3dmot_ws/MCTrack/prsys_results/val_1/20251117_145748/step_0/tracking_results_for_motion.json \
  --output_dir /3dmot_ws/MCTrack/prsys_results/val_1/20251117_145748/step_0/visualize_images_rot_det \
  --scene_name scene-0013