docker build -t mctrack:v0.1 .

pip install tensorflow
pip install open3d

docker run -it --shm-size=16g \
    -p 8081:8081 \
    -v "/media/aimlab/HDD00/users/seongjun/3dmot_ws/MCTrack:/3dmot_ws/MCTrack" \
    -v "/media/aimlab/HDD00/dataset/seongjun_data/MCTrack/data:/3dmot_ws/MCTrack/data" \
    -v "/media/aimlab/HDD00/users/seonghyeon/pr_system/OpenPCDet/data/nuscenes/v1.0-trainval:/3dmot_ws/MCTrack/data/nuscenes/datasets" \
    -e DISPLAY=$DISPLAY -v /tmp/.X11-unix:/tmp/.X11-unix \
    --name mctrack0 \
    mctrack:v0.1 /bin/bash

python preprocess/convert2baseversion.py --dataset nuscenes

python main.py --dataset nuscenes -p 1
python main.py --dataset nuscenes -p 1 --debug
python main.py --dataset nuscenes -p 20 -e

python seongjun_tools/visualize_track.py \
  --results_json results/nuscenes/20251031_072937/results_for_motion.json \
  --nusc_root data/nuscenes/datasets \
  --scene_name scene-0003 \
  --version v1.0-trainval


python seongjun_tools/evaluate_trackwise.py \
    results/nuscenes/20251031_081143/results_for_motion.json \
    --nusc_dataroot data/nuscenes/datasets \
    --eval_set val \
    --nusc_version v1.0-trainval \
    --output_path results/nuscenes/20251031_081143/trackwise_evaluation.json \
    --verbose 1

python seongjun_tools/evaluate_trackwise.py \
    prsys_results/interface_test/20251104_194500/step_1/tracking_results_for_motion.json \
    --nusc_dataroot data/nuscenes/datasets \
    --eval_set val \
    --nusc_version v1.0-trainval \
    --output_path prsys_results/interface_test/20251104_194500/step_1/trackwise_evaluation.json \
    --verbose 1

python /3dmot_ws/MCTrack/preprocess/convert2baseversion.py \
  --dets_path data/nuscenes/detectors/centerpoint/val.json \
  --save_path data/base_version/nuscenes/{YYYYMMDD_hhmmss}/step_{N} \
  --split val

python /3dmot_ws/MCTrack/main.py -p 20 \
  --dets_path data/base_version/nuscenes/{YYYYMMDD_hhmmss}/step_{N} \
  --save_path prsys_results/{YYYYMMDD_hhmmss}/step_{N} \
  --split {val/test/train} 

datetime.now().strftime("%Y%m%d_%H%M%S")

bash /3dmot_ws/MCTrack/perform_tracking.sh \
  --run_name test_1 \
  --timestamp 20251104_170700 \
  --step 1 \
  --processors 20 \
  --split val \
  --dets_file_path /3dmot_ws/MCTrack/data/nuscenes/detectors/centerpoint/val.json

bash /3dmot_ws/MCTrack/perform_tracking.sh \
  --run_name test_1 \
  --timestamp 20251104_194500 \
  --step 1 \
  --processors 20 \
  --split val \
  --dets_file_path /3dmot_ws/MCTrack/data/nuscenes/detectors/test/detection_results.json

python /3dmot_ws/MCTrack/main.py -p 20 \
  --dets_folder_path /3dmot_ws/MCTrack/data/base_version/nuscenes/interface_test/20251104_194500/step_1 \
  --save_folder_path /3dmot_ws/MCTrack/prsys_results/interface_test/20251104_194500/step_1 \
  --split val